!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("gsap")):"function"==typeof define&&define.amd?define(["gsap"],e):(t=t||self).motext=e(t.gsap)}(this,(function(t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const e={color:"#000000",colors:["#0dafb7","#eabc36","#e154ed","#62d628"],revealProperty:"y",revealAmount:-6,revealDuration:.8,revealEase:"elastic",strokeWidth:8,strokeLinecap:"square",strokeLinejoin:"bevel",strokeDuration:1,strokeEase:"slow",offsetDuration:.15,staggerAmount:.1,staggerEase:"none"},o={"!":"exclamation-mark","?":"question-mark",".":"period",",":"comma",'"':"double-quote","'":"apostrophe","&":"ampersand"},n=["Q","g","j","p","q","y",","],r=['"',"'"],s=[];let i=!1,a=null;function l(t){let e=window.getComputedStyle(t,null).getPropertyValue("font-size");return e=parseFloat(e),e}function c(t,e){t.fontSize=e;const o=e/55;Array.from(t.querySelectorAll(".motext-letter")).forEach(t=>{const e=t.getAttribute("data-base-width"),n=t.getAttribute("data-base-height");t.setAttribute("width",e*o+"px"),t.setAttribute("height",n*o+"px")})}function u(e){const o=this.targets()[0].closest(".motext-letter");if(!o.getAttribute("data-revealed")){const n={ease:e.revealEase,duration:e.revealDuration};n[e.revealProperty]=e.revealAmount,t.from(o,n),o.setAttribute("data-revealed",!0)}}return window.addEventListener("resize",t=>{s.forEach(t=>{t.collection.forEach(t=>{const e=l(t);e!==t.fontSize&&c(t,e)})})}),{loadFont:function(t){return a||(a=fetch(t).then(t=>t.text()).then(t=>{const e=document.createElement("div");e.innerHTML=t,e.setAttribute("class","motext-font"),document.body.appendChild(e),function(){const t=document.createElement("style");document.head.prepend(t),t.textContent="\n  .motext {\n    display: inline-block;\n  }\n\n  .motext-word {\n    white-space: nowrap;\n    display: inline-block;\n    vertical-align: bottom;\n    margin-right: 0.4em;\n    margin-bottom: 0.4em;\n  }\n\n  .motext-letter {\n    margin-right: 0.04em;\n  }\n\n  .motext-letter--descend {\n    margin-bottom: -0.22em;\n  }\n\n  .motext-letter--ascend {\n    vertical-align: top;\n  }\n\n  .motext-font {\n    position: absolute;\n    top: -9999px;\n    left: -9999px;\n    width: 0;\n    height: 0;\n    overflow: hidden;\n    visibility: hidden;\n  }\n"}()}).catch(t=>{console.error(t)}),a)},init:function(a,d={}){d={...e,...d};const m=[],f=function(t){return"string"==typeof t?(t=document.querySelectorAll(t),Array.from(t)):function(t){return NodeList.prototype.isPrototypeOf(t)}(t)?Array.from(t):function(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}(t)||function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}(t)?[t]:[]}(a);f.forEach(e=>{i||function(t){const e=document.getElementById("motext");(function(t,e){Array.from(t.children).forEach(t=>{t.removeAttribute("transform"),t.removeAttribute("opacity"),t.removeAttribute("stroke-linecap"),t.removeAttribute("stroke-linejoin"),t.removeAttribute("stroke-width"),t.setAttribute("class","motext-colored");Array.from(t.children).forEach(t=>{const e=t.getTotalLength()+8;t.style.strokeDasharray=e,t.style.strokeDashoffset=e})})})(e),function(t,e){Array.from(t.children).forEach(o=>{const n=o.cloneNode(!0);n.setAttribute("class","motext-solid"),n.setAttribute("id",o.id+"l"),n.setAttribute("stroke",e.color),t.appendChild(n)})}(e,t),i=!0}(d),e.setAttribute("aria-label",e.textContent),function(t,e){let s='<span class="motext"><span class="motext-word">';t.textContent.trim().split("").forEach(t=>{if(" "===t)s+='</span><span class="motext-word">';else{const i=o[t];let a="mo-"+t;i&&(a="mo-"+i);const l=document.getElementById(a),c=document.getElementById(a+"l");if(l&&c){const o=l.getBBox();let a="";n.includes(t)?a="descend":r.includes(t)&&(a="ascend"),s+=function({width:t,height:e,offset:o,options:n,character:r}){let s="motext-letter";o&&(s+=" motext-letter--"+o);r&&(s+=" motext-letter--"+r);return`<svg class="${s}" data-base-width="${t}" data-base-height="${e}" width="${t}px" height="${e}px" viewBox="0 0 ${t} ${e}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n  <g class="motext-letterInner" stroke-linecap="${n.strokeLinecap}" stroke-linejoin="${n.strokeLinejoin}" fill="none" transform="translate(${n.strokeWidth/2}, ${n.strokeWidth/2})" stroke-width="${n.strokeWidth}">`}({width:o.width+10,height:o.height+10,offset:a,options:e,character:i||t}),s+=l.outerHTML,s+=c.outerHTML,s+="</g></svg>"}else console.warn(`motext.js does not support the character "${t}". This character has been omitted.`)}}),s+="</span></span>",t.innerHTML=s,function(t,e){let o=e.colors[0];Array.from(t.querySelectorAll(".motext-colored")).forEach(t=>{t.setAttribute("stroke",o);let n=e.colors.indexOf(o)+1;n>=e.colors.length&&(n=0),o=e.colors[n]}),Array.from(t.querySelectorAll(".motext-solid")).forEach(t=>{t.setAttribute("stroke",e.color)})}(t,e);const i=l(t);c(t,i)}(e,d),m.push(function(e,o){const n=e.querySelectorAll(".motext-colored path, .motext-colored polyline"),r=t.timeline();r.to(n,{duration:o.strokeDuration,ease:o.strokeEase,strokeDashoffset:0,stagger:{each:o.staggerAmount,ease:o.staggerEase,onStart:function(){u.call(this,o)}}});const s=e.querySelectorAll(".motext-solid path, .motext-solid polyline");return r.to(s,{duration:o.strokeDuration,ease:o.strokeEase,strokeDashoffset:0,stagger:{each:o.staggerAmount,ease:o.staggerEase}},o.offsetDuration),r.pause(),r}(e,d))});const h={el:a,collection:f,options:d,timelines:m,play:function(){const t=[];return this.timelines.forEach(e=>{t.push(e.play())}),Promise.all(t)}};return s.push(h),h}}}));
